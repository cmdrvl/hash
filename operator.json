{
  "schema_version": "operator.v0",
  "name": "hash",
  "version": "0.1.0",
  "description": "Computes exact byte identity (SHA-256 or BLAKE3) for artifacts in a manifest",
  "repository": "https://github.com/cmdrvl/hash",
  "license": "MIT",
  "agent_guide": "https://github.com/cmdrvl/.github/blob/main/profile/AGENT_PROMPT.md",
  "invocation": {
    "binary": "hash",
    "output_mode": "stream",
    "output_schema": "hash.v0",
    "json_flag": null
  },
  "arguments": [
    {
      "name": "input",
      "type": "file_path",
      "required": false,
      "position": 0,
      "description": "JSONL manifest file (default: stdin)"
    }
  ],
  "options": [
    {
      "name": "algorithm",
      "flag": "--algorithm",
      "type": "string",
      "default": "sha256",
      "description": "Hash algorithm: sha256 or blake3"
    },
    {
      "name": "jobs",
      "flag": "--jobs",
      "type": "integer",
      "description": "Number of parallel workers (default: CPU count)"
    }
  ],
  "exit_codes": {
    "0": {
      "meaning": "ALL_HASHED",
      "domain": "positive"
    },
    "1": {
      "meaning": "PARTIAL",
      "domain": "negative"
    },
    "2": {
      "meaning": "REFUSAL",
      "domain": "error"
    }
  },
  "refusals": [
    {
      "code": "E_BAD_INPUT",
      "message": "Input is not valid JSONL or missing required fields",
      "action": "escalate"
    },
    {
      "code": "E_IO",
      "message": "Cannot read input/output stream",
      "action": "escalate"
    }
  ],
  "capabilities": {
    "formats": [
      "*"
    ],
    "profile_aware": false,
    "streaming": true
  },
  "pipeline": {
    "upstream": [
      "vacuum"
    ],
    "downstream": [
      "fingerprint",
      "lock"
    ]
  }
}
